

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>YAML Utility Module &mdash; Grafana Provisioning  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Grafana API Module" href="grafanaAPI.html" />
    <link rel="prev" title="Provisioning Grafana Organizations" href="inputStructure.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Grafana Provisioning
          

          
            
            <img src="_static/lsst-logo-dark.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Readme</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="readme.html">Server Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="readme.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="readme.html#general-configuration">General Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme.html#grafana-admin-accounts">Grafana Admin Accounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme.html#default-organization">Default Organization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="readme.html#dependencies">Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme.html#provisioning-setup">Provisioning Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme.html#provisioning">Provisioning</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#criteria-to-restart-grafana">Criteria to Restart Grafana</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#faq">FAQ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="readme.html#can-i-make-permanent-links-to-my-dashboards">Can I make permanent links to my dashboards?</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme.html#what-software-and-versions-does-this-project-use">What software and versions does this project use?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#recommendations">Recommendations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="readme.html#grafana-settings">Grafana Settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="readme.html#dns">DNS</a></li>
<li class="toctree-l4"><a class="reference internal" href="readme.html#viewers-can-edit">Viewers Can Edit</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="readme.html#grafana-internal-database">Grafana Internal Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme.html#time-related-issues">Time Related Issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="readme.html#datasource-minimum-time-interval">Datasource Minimum Time Interval</a></li>
<li class="toctree-l4"><a class="reference internal" href="readme.html#influxdb-row-limit">InfluxDB Row Limit</a></li>
<li class="toctree-l4"><a class="reference internal" href="readme.html#telegraf-precision">Telegraf Precision</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="inputStructure.html">Provisioning Grafana Organizations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="inputStructure.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="inputStructure.html#grafana-basic-concepts">Grafana Basic Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="inputStructure.html#what-provisioning-your-organization-means">What Provisioning Your Organization Means</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="inputStructure.html#input-structure">Input Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="inputStructure.html#organization">Organization</a></li>
<li class="toctree-l3"><a class="reference internal" href="inputStructure.html#accounts">Accounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="inputStructure.html#datasources">Datasources</a></li>
<li class="toctree-l3"><a class="reference internal" href="inputStructure.html#folders-and-dashboards">Folders and Dashboards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="inputStructure.html#exporting-dashboards">Exporting Dashboards</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="inputStructure.html#program-behavior-with-input-files">Program Behavior with Input Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="inputStructure.html#what-the-input-files-do">What the Input Files Do</a><ul>
<li class="toctree-l4"><a class="reference internal" href="inputStructure.html#org-yaml">org.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputStructure.html#accounts-yaml">accounts.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputStructure.html#datasources-yaml">datasources.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputStructure.html#dashboards">dashboards/</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="inputStructure.html#what-the-input-files-can-t-do">What the Input Files Can’t Do</a><ul>
<li class="toctree-l4"><a class="reference internal" href="inputStructure.html#id2">org.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputStructure.html#id3">accounts.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputStructure.html#id4">dashboards/</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">YAML Utility Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="grafanaAPI.html">Grafana API Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="grafanaAPI.html#notes">Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="grafanaAPI.html#functions">Functions</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Scripts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup Script</a><ul>
<li class="toctree-l2"><a class="reference internal" href="setup.html#notes">Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="inputs.html">Input Script</a><ul>
<li class="toctree-l2"><a class="reference internal" href="inputs.html#input-files">Input Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="inputs.html#organization">Organization</a></li>
<li class="toctree-l3"><a class="reference internal" href="inputs.html#accounts">Accounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="inputs.html#datasources">Datasources</a></li>
<li class="toctree-l3"><a class="reference internal" href="inputs.html#dashboards">Dashboards</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="inputs.html#notes">Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="inputs.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="accounts.html">Accounts Script</a><ul>
<li class="toctree-l2"><a class="reference internal" href="accounts.html#functions">Functions</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Grafana Provisioning</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>YAML Utility Module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/yamlUtility.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="grafanaAPI.html" class="btn btn-neutral float-right" title="Grafana API Module" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="inputStructure.html" class="btn btn-neutral float-left" title="Provisioning Grafana Organizations" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-yamlUtility">
<span id="yaml-utility-module"></span><h1>YAML Utility Module<a class="headerlink" href="#module-yamlUtility" title="Permalink to this headline">¶</a></h1>
<p>Module to read from and write to our yaml configuration files.</p>
<p>This module is intended to be used by the Grafana provisioning scripts to read
information from certain yaml configuration files, and write to others. The 
functions getYamlContent and writeYamlContent are generic enough so that they 
can be used with any yaml file. It is implemented with pyyaml 3.13.</p>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="yamlUtility.getApiCredentials">
<code class="descclassname">yamlUtility.</code><code class="descname">getApiCredentials</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/yamlUtility.html#getApiCredentials"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#yamlUtility.getApiCredentials" title="Permalink to this definition">¶</a></dt>
<dd><p>Return Grafana’s main admin’s username and password.</p>
<p>From the information stored in /admins/_superAdmins.yaml, return the main
admin’s <code class="docutils literal notranslate"><span class="pre">login</span></code> and <code class="docutils literal notranslate"><span class="pre">password</span></code>. This user should usually have id=1.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first docutils">
<dt><strong>admLogin</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><cite>str</cite></span></dt>
<dd><p class="first last">Username, or <code class="docutils literal notranslate"><span class="pre">login</span></code>, of the main Grafana Admin account.</p>
</dd>
<dt><strong>admPasswd</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><cite>str</cite></span></dt>
<dd><p class="first last"><code class="docutils literal notranslate"><span class="pre">password</span></code> of the main Grafana Admin account.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>yaml.YAMLError</strong></dt>
<dd><p class="first last">Raised if the super admins file does not contain a valid YAML format.</p>
</dd>
<dt><strong>PermissionError:</strong></dt>
<dd><p class="first last">Raised if the module does not have read permissions on the super admins
file.</p>
</dd>
<dt><strong>FileNotFoundError:</strong></dt>
<dd><p class="first last">Raised if the super admins file doesn’t exist or if the file cannot be
accessed by the module.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#yamlUtility.loadConfig" title="yamlUtility.loadConfig"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loadConfig</span></code></a>, <a class="reference internal" href="#yamlUtility.getYamlContent" title="yamlUtility.getYamlContent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getYamlContent</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="yamlUtility.getSuperAdminLogin">
<code class="descclassname">yamlUtility.</code><code class="descname">getSuperAdminLogin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/yamlUtility.html#getSuperAdminLogin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#yamlUtility.getSuperAdminLogin" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain the username of Grafana’s Main admin account.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first docutils">
<dt><strong>login</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><cite>str</cite></span></dt>
<dd><p class="first last">Username of Grafana’s Main admin account.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>yaml.YAMLError</strong></dt>
<dd><p class="first last">Raised if the super admins file does not contain a valid YAML format.</p>
</dd>
<dt><strong>PermissionError:</strong></dt>
<dd><p class="first last">Raised if the module does not have read permissions on the super admins
file.</p>
</dd>
<dt><strong>FileNotFoundError:</strong></dt>
<dd><p class="first last">Raised if the super admins file doesn’t exist or if the file cannot be
accessed by the module.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#yamlUtility.loadConfig" title="yamlUtility.loadConfig"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loadConfig</span></code></a>, <a class="reference internal" href="#yamlUtility.getYamlContent" title="yamlUtility.getYamlContent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getYamlContent</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="yamlUtility.getYamlContent">
<code class="descclassname">yamlUtility.</code><code class="descname">getYamlContent</code><span class="sig-paren">(</span><em>file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/yamlUtility.html#getYamlContent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#yamlUtility.getYamlContent" title="Permalink to this definition">¶</a></dt>
<dd><p>Return YAML file translated to a Python data structure.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>file</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><cite>str</cite></span></dt>
<dd><p class="first last">Path of the YAML file whose content will be loaded.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first docutils">
<dt><strong>yamlConfig</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Usually <cite>dict</cite> or <cite>list</cite></span></dt>
<dd><p class="first last">Contents of the YAML configuration file translated to Python, can be any
type of value or structure supported by YAML.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>yaml.YAMLError</strong></dt>
<dd><p class="first last">Raised if the given file does not contain a valid YAML format.</p>
</dd>
<dt><strong>PermissionError:</strong></dt>
<dd><p class="first last">Raised if the module does not have read permissions on the given file.</p>
</dd>
<dt><strong>FileNotFoundError:</strong></dt>
<dd><p class="first last">Raised if the given file doesn’t exist or if the file cannot be accessed by
the module.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Since YAML files are data structures mainly composed of dictionaries and lists,
the caller of this function must know what data structure to expect as a return
value for a given file.</p>
</dd></dl>

<dl class="function">
<dt id="yamlUtility.loadConfig">
<code class="descclassname">yamlUtility.</code><code class="descname">loadConfig</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/yamlUtility.html#loadConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#yamlUtility.loadConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Return config.yaml as a Python data structure and set global timeout.</p>
<p>This function loads the content of config.yaml into Python. These are settings
for the Grafana provisioning scripts to use. It also sets the global value of
<code class="docutils literal notranslate"><span class="pre">to</span></code>, which is a timeout configuration used by <code class="docutils literal notranslate"><span class="pre">req()</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first docutils">
<dt><strong>config</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><cite>dict</cite></span></dt>
<dd><p class="first last">The contents of config.yaml as a Python dictionary. Contains routes to
directories used by the provisioning scripts, and other settings such as
timeout limit for API requets.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>yaml.YAMLError</strong></dt>
<dd><p class="first last">Raised if the config file does not contain a valid YAML format.</p>
</dd>
<dt><strong>PermissionError:</strong></dt>
<dd><p class="first last">Raised if the module does not have read permissions on the config file.</p>
</dd>
<dt><strong>FileNotFoundError:</strong></dt>
<dd><p class="first last">Raised if the config file doesn’t exist or if the file cannot be accessed
by the module.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#yamlUtility.getYamlContent" title="yamlUtility.getYamlContent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getYamlContent</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="yamlUtility.writeYamlContent">
<code class="descclassname">yamlUtility.</code><code class="descname">writeYamlContent</code><span class="sig-paren">(</span><em>file</em>, <em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/yamlUtility.html#writeYamlContent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#yamlUtility.writeYamlContent" title="Permalink to this definition">¶</a></dt>
<dd><p>Write contents of a Python data structure to a YAML file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>file</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><cite>str</cite></span></dt>
<dd><p class="first last">Path of the YAML to which <cite>data</cite> will be written.</p>
</dd>
<dt><strong>data</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Usually <cite>dict</cite> or <cite>list</cite></span></dt>
<dd><p class="first last">Python data structure to be written in <cite>file</cite>, can be any type of value or
structure supported by YAML.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>PermissionError:</strong></dt>
<dd><p class="first last">Raised if the module does not have write permissions on the given file or
directory.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="grafanaAPI.html" class="btn btn-neutral float-right" title="Grafana API Module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="inputStructure.html" class="btn btn-neutral float-left" title="Provisioning Grafana Organizations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019 Association of Universities for Research in Astronomy.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
<p><br>
    This project was developed for the IT Department of the LSST Project and
    AURA by the intern José Moreno Hanshing under the supervision of Andrés
    Villalobos Rivera, during Jan-Feb 2019 in the city of La Serena.
    <address>
        Contact: <a href="mailto:webmaster@example.com">
        jmoreno.hanshing@gmail.com</a>
    </address>
</p>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>